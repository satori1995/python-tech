<!DOCTYPE HTML>
<html lang="zh-cn" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ä½¿ç”¨ unicodedata æ¨¡å—å¯¹å­—ç¬¦ä¸²æ ‡å‡†åŒ– - Python å®ç”¨æŠ€å·§</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/custom.css">
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../å¦‚ä½•ä¼˜é›…åœ°éå†å¯è¿­ä»£å¯¹è±¡ï¼Ÿ/doc.html">å¦‚ä½•ä¼˜é›…åœ°éå†å¯è¿­ä»£å¯¹è±¡ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="../è§£å¯†å¯è¿­ä»£å¯¹è±¡çš„æ’åºé—®é¢˜/doc.html">è§£å¯†å¯è¿­ä»£å¯¹è±¡çš„æ’åºé—®é¢˜</a></li><li class="chapter-item expanded "><a href="../é€šè¿‡ TOP K é—®é¢˜ï¼Œæ¢ç©¶å †å’Œä¼˜å…ˆé˜Ÿåˆ—çš„ç§˜å¯†/doc.html">é€šè¿‡ TOP K é—®é¢˜ï¼Œæ¢ç©¶å †å’Œä¼˜å…ˆé˜Ÿåˆ—çš„ç§˜å¯†</a></li><li class="chapter-item expanded "><a href="../å¦‚ä½•ä¼˜é›…åœ°å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Ÿ/doc.html">å¦‚ä½•ä¼˜é›…åœ°å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="../å…¨æ–¹ä½è§£æ f-string/doc.html">å…¨æ–¹ä½è§£æ f-string</a></li><li class="chapter-item expanded "><a href="../æœ€å¥½çš„æ—¥æœŸå¤„ç†åº“ï¼špendulum/doc.html">æœ€å¥½çš„æ—¥æœŸå¤„ç†åº“ï¼špendulum</a></li><li class="chapter-item expanded "><a href="../ä½ çŸ¥é“åˆ›å»ºæ¨¡å—éƒ½æœ‰å“ªäº›æ–¹å¼å—ï¼Ÿ/doc.html">ä½ çŸ¥é“åˆ›å»ºæ¨¡å—éƒ½æœ‰å“ªäº›æ–¹å¼å—ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="../exitã€quitã€sys.exitã€os._exitï¼Œè¿™ä¹ˆå¤šé€€å‡ºæ–¹å¼ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ/doc.html">exitã€quitã€sys.exitã€os._exitï¼Œè¿™ä¹ˆå¤šé€€å‡ºæ–¹å¼ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="../æ–‡ä»¶å¤„ç†çš„ä¸€äº›æœ€ä½³å®è·µ/doc.html">æ–‡ä»¶å¤„ç†çš„ä¸€äº›æœ€ä½³å®è·µ</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ os æ¨¡å—æ›´é«˜æ•ˆåœ°è¯»å†™æ–‡ä»¶/doc.html">ä½¿ç”¨ os æ¨¡å—æ›´é«˜æ•ˆåœ°è¯»å†™æ–‡ä»¶</a></li><li class="chapter-item expanded "><a href="../å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ï¼Œåƒæ•°ç»„ä¸€æ ·è®¿é—®/doc.html">å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ï¼Œåƒæ•°ç»„ä¸€æ ·è®¿é—®</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ psutil è·å–ç¡¬ä»¶ã€ç½‘ç»œä»¥åŠè¿›ç¨‹ä¿¡æ¯/doc.html">ä½¿ç”¨ psutil è·å–ç¡¬ä»¶ã€ç½‘ç»œä»¥åŠè¿›ç¨‹ä¿¡æ¯</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ä¿å­˜æ•°æ®/doc.html">ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ä¿å­˜æ•°æ®</a></li><li class="chapter-item expanded "><a href="../shutilï¼šæ›´ä¼˜é›…åœ°æ‹·è´æ–‡ä»¶/doc.html">shutilï¼šæ›´ä¼˜é›…åœ°æ‹·è´æ–‡ä»¶</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ contextvars ç®¡ç†ä¸Šä¸‹æ–‡å˜é‡/doc.html">ä½¿ç”¨ contextvars ç®¡ç†ä¸Šä¸‹æ–‡å˜é‡</a></li><li class="chapter-item expanded "><a href="../è‡ªå®šä¹‰å¼‚å¸¸å †æ ˆä¿¡æ¯/doc.html">è‡ªå®šä¹‰å¼‚å¸¸å †æ ˆä¿¡æ¯</a></li><li class="chapter-item expanded "><a href="../prettytableï¼šåƒæ•°æ®åº“ä¸€æ ·æ ¼å¼åŒ–è¾“å‡ºå†…å®¹/doc.html">prettytableï¼šåƒæ•°æ®åº“ä¸€æ ·æ ¼å¼åŒ–è¾“å‡ºå†…å®¹</a></li><li class="chapter-item expanded "><a href="../è½»æ¾ç»˜åˆ¶åŠ¨æ€æ¡å½¢å›¾/doc.html">è½»æ¾ç»˜åˆ¶åŠ¨æ€æ¡å½¢å›¾</a></li><li class="chapter-item expanded "><a href="../è‡ªå®šä¹‰ jupyter é­”æ³•å‘½ä»¤/doc.html">è‡ªå®šä¹‰ jupyter é­”æ³•å‘½ä»¤</a></li><li class="chapter-item expanded "><a href="../è§£æ iniã€yamlã€toml é…ç½®æ–‡ä»¶/doc.html">è§£æ iniã€yamlã€toml é…ç½®æ–‡ä»¶</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ fuzzywuzzy æ¨¡å—è®¡ç®—ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„ç›¸ä¼¼åº¦/doc.html">ä½¿ç”¨ fuzzywuzzy æ¨¡å—è®¡ç®—ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„ç›¸ä¼¼åº¦</a></li><li class="chapter-item expanded "><a href="../å‘½ä»¤è¡Œè§£æå·¥å…· argparse/doc.html">å‘½ä»¤è¡Œè§£æå·¥å…· argparse</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ urllib.parse æ¨¡å—ä¼˜é›…åœ°å¤„ç† URL/doc.html">ä½¿ç”¨ urllib.parse æ¨¡å—ä¼˜é›…åœ°å¤„ç† URL</a></li><li class="chapter-item expanded "><a href="../Python å®ç°å¤åˆ¶ç²˜è´´/doc.html">Python å®ç°å¤åˆ¶ç²˜è´´</a></li><li class="chapter-item expanded "><a href="../Python ç”Ÿæˆã€è§£æäºŒç»´ç /doc.html">Python ç”Ÿæˆã€è§£æäºŒç»´ç </a></li><li class="chapter-item expanded "><a href="../è§£å¯† __getattr__ å’Œ __getattribute__ çš„ç”¨æ³•ä¸åŒºåˆ«/doc.html">è§£å¯† __getattr__ å’Œ __getattribute__ çš„ç”¨æ³•ä¸åŒºåˆ«</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ fcntl æ¨¡å—å¯¹æ–‡ä»¶è¿›è¡ŒåŠ è§£é”/doc.html">ä½¿ç”¨ fcntl æ¨¡å—å¯¹æ–‡ä»¶è¿›è¡ŒåŠ è§£é”</a></li><li class="chapter-item expanded "><a href="../è¯¦è§£æ–°ä¸€ä»£ HTTP è¯·æ±‚åº“ï¼šhttpx/doc.html">è¯¦è§£æ–°ä¸€ä»£ HTTP è¯·æ±‚åº“ï¼šhttpx</a></li><li class="chapter-item expanded "><a href="../é€šè¿‡ contextlib æ¨¡å—è¯¦ç»†å¤ä¹ ä¸€ä¸‹ with è¯­å¥çš„ç”¨æ³•/doc.html">é€šè¿‡ contextlib æ¨¡å—è¯¦ç»†å¤ä¹ ä¸€ä¸‹ with è¯­å¥çš„ç”¨æ³•</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ collections æ¨¡å—æ‰©å±•ä½ çš„æ•°æ®ç±»/doc.html">ä½¿ç”¨ collections æ¨¡å—æ‰©å±•ä½ çš„æ•°æ®ç±»</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ unicodedata æ¨¡å—å¯¹å­—ç¬¦ä¸²æ ‡å‡†åŒ–/doc.html" class="active">ä½¿ç”¨ unicodedata æ¨¡å—å¯¹å­—ç¬¦ä¸²æ ‡å‡†åŒ–</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ struct æ¨¡å—æ‰“åŒ…ã€è§£åŒ…äºŒè¿›åˆ¶æ•°æ®/doc.html">ä½¿ç”¨ struct æ¨¡å—æ‰“åŒ…ã€è§£åŒ…äºŒè¿›åˆ¶æ•°æ®</a></li><li class="chapter-item expanded "><a href="../ä½¿ç”¨ watchfiles æ¨¡å—ç›‘æ§ç›®å½•å˜æ›´/doc.html">ä½¿ç”¨ watchfiles æ¨¡å—ç›‘æ§ç›®å½•å˜æ›´</a></li><li class="chapter-item expanded "><a href="../è¯»å–ç…§ç‰‡çš„ Exif ä¿¡æ¯/doc.html">è¯»å–ç…§ç‰‡çš„ Exif ä¿¡æ¯</a></li><li class="chapter-item expanded "><a href="../æ¨¡æ‹Ÿ TLS æŒ‡çº¹å®ç°ååçˆ¬/doc.html">æ¨¡æ‹Ÿ TLS æŒ‡çº¹å®ç°ååçˆ¬</a></li><li class="chapter-item expanded "><a href="../ç”Ÿæˆè¯äº‘/doc.html">ç”Ÿæˆè¯äº‘</a></li><li class="chapter-item expanded "><a href="../ä½ çŸ¥é“ Python å…¶å®è‡ªå¸¦äº†å°å‹æ•°æ®åº“å—/doc.html">ä½ çŸ¥é“ Python å…¶å®è‡ªå¸¦äº†å°å‹æ•°æ®åº“å—</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Python å®ç”¨æŠ€å·§</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/satori1995/python-tech" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p>æœ¬æ¬¡æˆ‘ä»¬æ¥èŠä¸€èŠ Python çš„ä¸€ä¸ªå†…ç½®æ¨¡å—ï¼šunicodedataï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨æ¥å¤„ç† unicode å­—ç¬¦ä¸²çš„ï¼Œä¸‹é¢æ¥çœ‹çœ‹å®ƒçš„ç”¨æ³•ã€‚</p>
<p><strong><font color="blue">unicodedata.normalize</font></strong></p>
<p>è´Ÿè´£å¯¹ unicode å­—ç¬¦ä¸²è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ï¼Œå› ä¸ºæœ‰äº›å­—ç¬¦çœ‹ä¼¼é•¿åº¦ä¸º 1ï¼Œä½†å…¶å®ä¸æ˜¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="language-python">s1 = &quot;Ã©&quot;
s2 = &quot;eÌ&quot;
s3 = &quot;e\u0301&quot;
print(len(s1))  # 1
print(len(s2))  # 2
print(len(s3))  # 2
print(s1 == s2)  # False
print(s2 == s3)  # True
print(s1, s2, s3)  # Ã© eÌ eÌ
</code></pre>
<p>ç›¸ä¿¡æ‰“å°ç»“æœä¼šè®©ä½ æ„Ÿåˆ°è¯§å¼‚ï¼Œs2 çš„é•¿åº¦çœ‹ä¼¼ä¸º 1ï¼Œä½†å…¶å®æ˜¯ 2ï¼Œè¿™æ˜¯å› ä¸º Python3 çš„å­—ç¬¦ä¸²å­˜å‚¨çš„å…¶å®æ˜¯ç ä½åºåˆ—ã€‚è€ŒæŸäº›å­—ç¬¦å¯ä»¥æœ‰å¤šç§è¡¨ç¤ºæ–¹å¼ï¼Œæ¯”å¦‚ eÌï¼š</p>
<ul>
<li>é¢„ç»„åˆå­—ç¬¦ï¼šä»£ç ä¸­çš„ s1ï¼Œè¿™æ˜¯ä¸€ä¸ªå•ä¸€çš„ unicode ç ç‚¹ï¼Œè¡¨ç¤ºå¸¦æœ‰é‡éŸ³ç¬¦å·çš„å°å†™å­—æ¯ eï¼›</li>
<li>åˆ†è§£åºåˆ—ï¼šä»£ç ä¸­çš„ s3ï¼Œå°†å°å†™å­—æ¯ e å’Œé‡éŸ³ç¬¦å·ï¼ˆ\u0301ï¼‰åˆ†å¼€ï¼Œä½¿ç”¨ä¸¤ä¸ª unicode ç ç‚¹è¡¨ç¤ºï¼Œè€Œ s2 è™½ç„¶çœ‹èµ·æ¥å’Œ s1 ä¸€æ ·ï¼Œä½†å®ƒçš„è¡¨ç¤ºæ–¹å¼å’Œ s3 æ˜¯ç›¸åŒçš„ï¼›</li>
</ul>
<pre><code class="language-python"># ä¸¤ä¸ªç ç‚¹
s = &quot;eÌ&quot;
print(s[0] == &quot;e&quot;)  # True
print(s[1] == &quot;\u0301&quot;)  # True
</code></pre>
<p>è¿™ç§æƒ…å†µç›´æ¥å¤„ç†çš„è¯ä¼šæ¯”è¾ƒå¤´ç–¼ï¼Œæ‰€ä»¥ normalize çš„ä½œç”¨å°±æ˜¯è§„èŒƒåŒ–ï¼Œè®©å¤šä¸ªç ç‚¹è¡¨ç¤ºçš„å­—ç¬¦ä½¿ç”¨ä¸€ä¸ªç ç‚¹è¡¨ç¤ºã€‚è§„èŒƒåŒ–å‰åçš„å­—ç¬¦ä¸²é•¿å¾—ä¸€æ ·ï¼Œä½†æ˜¯é•¿åº¦å˜çŸ­äº†ã€‚</p>
<pre><code class="language-python">import unicodedata

s1 = &quot;lovÃ©&quot;
s2 = &quot;loveÌ&quot;
s3 = &quot;love\u0301&quot;
print(s1 == s2 == s3)  # False
print(len(s1), len(s2), len(s3))  # 4 5 5

# å¯¹å­—ç¬¦ä¸²è¿›è¡Œè§„èŒƒåŒ–ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è§„èŒƒåŒ–æ–¹å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²
# &quot;NFC&quot;ï¼šå°†å¤šä¸ªç ç‚¹è¡¨ç¤ºçš„å­—ç¬¦æ›¿æ¢ä¸ºç­‰æ•ˆçš„å•ä¸ªç ç‚¹å½¢å¼
normalize_s2 = unicodedata.normalize(&quot;NFC&quot;, s2)
normalize_s3 = unicodedata.normalize(&quot;NFC&quot;, s3)
print(
    s1 == normalize_s2 == normalize_s3
)  # True

print(s2, normalize_s2)  # loveÌ lovÃ©
print(len(s2), len(normalize_s2))  # 5 4
</code></pre>
<p>è§„èŒƒåŒ–æ–¹å¼é™¤äº† NFC ä¹‹å¤–è¿˜æœ‰ NFDï¼Œå®ƒå’Œ NFC æ˜¯ç›¸åçš„ï¼Œè¡¨ç¤ºè®©ä¸€ä¸ªç ç‚¹è¡¨ç¤ºçš„å­—ç¬¦ä½¿ç”¨å¤šä¸ªç ç‚¹è¡¨ç¤ºã€‚</p>
<pre><code class="language-python">import unicodedata

s1 = &quot;lovÃ©&quot;
s2 = &quot;loveÌ&quot;
s3 = &quot;love\u0301&quot;

print(len(s1), len(s2), len(s3))  # 4 5 5

# s1 ä¸­çš„ Ã© ä½¿ç”¨ä¸€ä¸ªç ç‚¹è¡¨ç¤ºï¼Œè¿™é‡Œè®©å®ƒå˜æˆç­‰æ•ˆçš„ä¸¤ä¸ªç ç‚¹
normalize_s1 = unicodedata.normalize(&quot;NFD&quot;, s1)
print(len(normalize_s1))  # 5

print(s1 == s3)  # False
print(normalize_s1 == s3)  # True
</code></pre>
<p>å› æ­¤è¿™å°±æ˜¯ unicode çš„è§„èŒƒåŒ–å¤„ç†ï¼Œå› ä¸ºæœ‰çš„ unicode å­—ç¬¦å¯ä»¥æœ‰å¤šç§è¡¨ç¤ºæ–¹å¼ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªç ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸¤ä¸ªç ç‚¹ï¼Œä½†å®ƒä»¬é•¿å¾—éƒ½ä¸€æ ·ã€‚NFC æ˜¯è®©ä¸¤ä¸ªç ç‚¹è¡¨ç¤ºçš„å­—ç¬¦ä½¿ç”¨ä¸€ä¸ªç ç‚¹è¡¨ç¤ºï¼ŒNFD æ˜¯è®©ä¸€ä¸ªç ç‚¹è¡¨ç¤ºçš„å­—ç¬¦ä½¿ç”¨ä¸¤ä¸ªç ç‚¹è¡¨ç¤ºã€‚</p>
<p>ä½†éœ€è¦æ³¨æ„ï¼šå¦‚æœå­—ç¬¦åªæœ‰ä¸€ç§è¡¨ç¤ºæ–¹å¼ï¼Œé‚£ä¹ˆè§„èŒƒåŒ–å‰åçš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</p>
<pre><code class="language-python">import unicodedata

# è¿™å…­ä¸ªå­—ç¬¦éƒ½åªæœ‰ä¸€ç§è¡¨ç¤ºæ–¹å¼
s = &quot;satori&quot;
nfc_s = unicodedata.normalize(&quot;NFC&quot;, s)
nfd_s = unicodedata.normalize(&quot;NFD&quot;, s)
print(s == nfc_s == nfd_s)  # True

# è¿™ä¸ª emoji åŒæ ·åªæœ‰ä¸€ç§è¡¨ç¤ºæ–¹å¼ï¼Œå¹¶ä¸”å ç”¨ä¸¤ä¸ªç ç‚¹
s = &quot;ğŸ˜€&quot;
nfc_s = unicodedata.normalize(&quot;NFC&quot;, s)
nfd_s = unicodedata.normalize(&quot;NFD&quot;, s)
print(s == nfc_s == nfd_s)  # True
</code></pre>
<p>æ‰€ä»¥ NFC ç›¸å½“äºç»„åˆï¼ŒNFD ç›¸å½“äºåˆ†è§£ã€‚</p>
<p>ç„¶åé™¤äº† NFC å’Œ NFD ä¹‹å¤–ï¼Œè¿˜æœ‰ NFKC å’Œ NFKDï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿç”¨å¤§ç™½è¯è§£é‡Šå°±æ˜¯ï¼š</p>
<ul>
<li>NFC å’Œ NFD æ ‡å‡†åŒ–å‰åçš„å­—ç¬¦ï¼Œè™½ç„¶å ç”¨çš„ç ç‚¹ä¸åŒï¼Œä½†èµ·ç é•¿å¾—ä¸€æ ·ï¼Œä¸¤è€…åœ¨å¤–è§‚ä¸Šæ˜¯ç­‰ä»·çš„ã€‚è¿™ç§æ›¿æ¢æ–¹å¼ä¹Ÿè¢«ç§°ä¸ºæ ‡å‡†æ›¿æ¢ã€‚</li>
<li>è€Œ NFKC å’Œ NFKD åˆ™æ˜¯å…¼å®¹æ›¿æ¢ï¼Œå®ƒä»¬æ›´å…³æ³¨æ–‡å­—è¯­ä¹‰çš„è¡¨è¾¾ã€‚</li>
</ul>
<pre><code class="language-python">import unicodedata

print(unicodedata.normalize(&quot;NFKD&quot;, &quot;ã¿&quot;))  # æ ªå¼ä¼šç¤¾
print(unicodedata.normalize(&quot;NFKD&quot;, &quot;ãŠ¥&quot;))  # ä¸­
print(
    unicodedata.normalize(&quot;NFKD&quot;, &quot;â‘ â‘¡â‘¢â‘£â‘¤&quot;)
)  # 12345

# ä¸Šè¿°å‡ ä¸ªå­—ç¬¦ä¸²å¦‚æœä½¿ç”¨ NFCã€NFD æ ‡å‡†åŒ–ï¼Œé‚£ä¹ˆç»“æœè¿˜æ˜¯åŸæ¥çš„æ ·å­
# è€Œ 'ã¿' å’Œ 'æ ªå¼ä¼šç¤¾' æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œå®ƒä»¬é•¿çš„éƒ½ä¸ä¸€æ ·
# æ‰€ä»¥è¿™ä¸¤è€…ä¸å¯èƒ½æ˜¯åŒä¸€ä¸ªå­—ç¬¦çš„ä¸åŒè¡¨è¾¾å½¢å¼
# ä½†ä»äººç±»çš„æ€ç»´æ¥è¯´ï¼Œè¿™ä¸¤è€…å°±æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œåœ¨è¯­ä¹‰ä¸Šæ˜¯ç­‰ä»·çš„

# æ‰€ä»¥ NFKD æ˜¯å…¼å®¹æ›¿æ¢ï¼Œè¯´ç™½äº†å°±æ˜¯æŒ‰ç…§è¯­ä¹‰æ›¿æ¢
# æ¯”å¦‚å…¨è§’è½¬åŠè§’ï¼Œç»„åˆå­—ç¬¦åˆ†è§£æˆå¤šä¸ªç‹¬ç«‹å­—ç¬¦
comma1 = &quot;ï¼Œ&quot;
comma2 = &quot;,&quot;
print(
    unicodedata.normalize(&quot;NFD&quot;, comma1) == comma2
)  # False
print(
    unicodedata.normalize(&quot;NFKD&quot;, comma1) == comma2
)  # True

# comma1 æ˜¯ä¸­æ–‡çš„é€—å·ï¼Œcomma2 æ˜¯è‹±æ–‡çš„é€—å·
# é‡‡ç”¨ NFD æ ‡å‡†åŒ–çš„ç»“æœå’Œä¹‹å‰ä¸€æ ·ï¼Œå› ä¸ºå…¨è§’å’ŒåŠè§’å‹æ ¹ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿
# ä½†å¯¹äºäººç±»è€Œè¨€ï¼Œä¸€çœ¼å°±çŸ¥é“å®ƒä»¬éƒ½æ˜¯é€—å·
# æ‰€ä»¥ NFKD æ ‡å‡†åŒ–ä¹‹åï¼Œä¼šå°†ä¸­æ–‡é€—å·è½¬æˆè‹±æ–‡é€—å·
</code></pre>
<p>æ‰€ä»¥è¿™å‡ ç§è§„èŒƒåŒ–æ–¹å¼åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<ul>
<li>NFCï¼šæŸäº›å­—ç¬¦å¯ä»¥æœ‰å¤šç§è¡¨è¾¾æ–¹å¼ï¼Œå°†å¤šä¸ªç ç‚¹è¡¨ç¤ºçš„å­—ç¬¦è½¬æˆä½¿ç”¨ä¸€ä¸ªç ç‚¹è¡¨ç¤ºï¼Œå­—ç¬¦åœ¨æ›¿æ¢å‰åçš„å¤–è§‚æ˜¯ä¸€æ ·çš„ï¼›</li>
<li>NFDï¼šå’Œ NFC ç›¸åï¼Œå°†ä¸€ä¸ªç ç‚¹è¡¨ç¤ºçš„å­—ç¬¦è½¬æˆä½¿ç”¨å¤šä¸ªç ç‚¹è¡¨ç¤ºï¼Œå­—ç¬¦åœ¨æ›¿æ¢å‰åçš„å¤–è§‚ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼›</li>
<li>NFKDï¼šæŒ‰ç…§è¯­ä¹‰å¯¹å­—ç¬¦è¿›è¡Œå…¼å®¹åˆ†è§£ï¼ˆå…¨è§’è½¬åŠè§’ï¼Œç»„åˆå­—ç¬¦åˆ†è§£ï¼‰ï¼Œå‰åå¤–è§‚ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†ç°å®è¯­ä¹‰ä¸å˜ã€‚æ¯”å¦‚ ãŠ¥ å’Œ ä¸­ï¼ŒãŠ‹ å’Œ ç«ï¼›</li>
<li>NFKCï¼šNFKD æ˜¯å…¼å®¹åˆ†è§£ï¼Œç›´æ¥å°±å®Œäº‹äº†ï¼Œè€Œ NFKC è¿˜ä¼šè¿›è¡Œç»„åˆï¼›</li>
</ul>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ NFC è§„èŒƒåŒ–å³å¯ï¼Œè€Œ NFKD åœ¨å¤„ç†å¸¦åœ†åœˆçš„æ•°å­—çš„æ—¶å€™ä¹Ÿä¼šä½¿ç”¨ã€‚</p>
<p><strong><font color="blue">unicodedata.category</font></strong></p>
<p>è¯¥å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå­—ç¬¦çš„ç±»åˆ«ï¼Œè€Œç±»åˆ«æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<pre><code class="language-python">'Lu'ï¼š'å¤§å†™å­—æ¯ï¼ˆLetter, uppercaseï¼‰'
'Ll'ï¼š'å°å†™å­—æ¯ï¼ˆLetter, lowercaseï¼‰'
'Lt'ï¼š'æ ‡é¢˜å¤§å°å†™å­—æ¯ï¼ˆLetter, titlecaseï¼‰'
'Lm'ï¼š'ä¿®é¥°å­—æ¯ï¼ˆLetter, modifierï¼‰'
'Lo'ï¼š'å…¶ä»–å­—æ¯ï¼ˆLetter, otherï¼‰'
'Mn'ï¼š'éé—´æ–­æ ‡è®°ï¼ˆMark, nonspacingï¼‰'
'Mc'ï¼š'é—´æ–­æ ‡è®°ï¼ˆMark, spacing combiningï¼‰'
'Me'ï¼š'å°é—­æ ‡è®°ï¼ˆMark, enclosingï¼‰'
'Nd'ï¼š'åè¿›åˆ¶æ•°å­—ï¼ˆNumber, decimal digitï¼‰'
'Nl'ï¼š'å­—æ¯æ•°å­—ï¼ˆNumber, letterï¼‰'
'No'ï¼š'å…¶ä»–æ•°å­—ï¼ˆNumber, otherï¼‰'
'Pc'ï¼š'è¿æ¥ç¬¦å·ï¼ˆPunctuation, connectorï¼‰'
'Pd'ï¼š'ç ´æŠ˜å·ç¬¦å·ï¼ˆPunctuation, dashï¼‰'
'Ps'ï¼š'å¼€æ”¾çš„æ ‡ç‚¹ç¬¦å·ï¼ˆPunctuation, openï¼‰'
'Pe'ï¼š'å…³é—­çš„æ ‡ç‚¹ç¬¦å·ï¼ˆPunctuation, closeï¼‰'
'Pi'ï¼š'åˆå¼•å·ï¼ˆPunctuation, initial quoteï¼‰'
'Pf'ï¼š'æœ«å¼•å·ï¼ˆPunctuation, final quoteï¼‰'
'Po'ï¼š'å…¶ä»–æ ‡ç‚¹ç¬¦å·ï¼ˆPunctuation, otherï¼‰'
'Sm'ï¼š'æ•°å­¦ç¬¦å·ï¼ˆSymbol, mathï¼‰'
'Sc'ï¼š'è´§å¸ç¬¦å·ï¼ˆSymbol, currencyï¼‰'
'Sk'ï¼š'ä¿®é¥°ç¬¦å·ï¼ˆSymbol, modifierï¼‰'
'So'ï¼š'å…¶ä»–ç¬¦å·ï¼ˆSymbol, otherï¼‰'
'Zs'ï¼š'ç©ºæ ¼ç¬¦å·ï¼ˆSeparator, spaceï¼‰'
'Zl'ï¼š'åˆ†è¡Œç¬¦ï¼ˆSeparator, lineï¼‰'
'Zp'ï¼š'åˆ†æ®µç¬¦ï¼ˆSeparator, paragraphï¼‰'
'Cc'ï¼š'æ§åˆ¶å­—ç¬¦ï¼ˆOther, controlï¼‰'
'Cf'ï¼š'æ ¼å¼å­—ç¬¦ï¼ˆOther, formatï¼‰'
'Cs'ï¼š'ä»£ç†å­—ç¬¦ï¼ˆOther, surrogateï¼‰'
'Co'ï¼š'ç§ç”¨å­—ç¬¦ï¼ˆOther, private useï¼‰'
'Cn'ï¼š'æœªåˆ†é…å­—ç¬¦ï¼ˆOther, not assignedï¼‰'
</code></pre>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="language-python">import unicodedata

print(unicodedata.category('A'))  # Lu
print(unicodedata.category('a'))  # Ll
print(unicodedata.category('1'))  # Nd
print(unicodedata.category('$'))  # Sc
print(unicodedata.category(' '))  # Zs
</code></pre>
<p>'A' æ˜¯å¤§å†™å­—æ¯ï¼Œæ‰€ä»¥å®ƒçš„ç±»åˆ«æ˜¯ 'Lu'ã€‚'a' æ˜¯å°å†™å­—æ¯ï¼Œæ‰€ä»¥å®ƒçš„ç±»åˆ«æ˜¯ 'Ll'ã€‚'1' æ˜¯åè¿›åˆ¶æ•°å­—ï¼Œæ‰€ä»¥å®ƒçš„ç±»åˆ«æ˜¯ 'Nd'ã€‚'$' æ˜¯è´§å¸ç¬¦å·ï¼Œæ‰€ä»¥å®ƒçš„ç±»åˆ«æ˜¯ 'Sc'ã€‚' ' æ˜¯ç©ºæ ¼ç¬¦å·ï¼Œæ‰€ä»¥å®ƒçš„ç±»åˆ«æ˜¯ 'Zs'ã€‚</p>
<p><strong><font color="blue">unicodedata.lookup</font></strong></p>
<p>æœ‰äº› unicode å­—ç¬¦æ˜¯æœ‰åå­—çš„ï¼Œå¯ä»¥æ ¹æ®å®ƒçš„åå­—æŸ¥æ‰¾ç›¸åº”çš„å­—ç¬¦ã€‚</p>
<pre><code class="language-python">import unicodedata

print(
    unicodedata.lookup(&quot;LATIN SMALL LETTER A&quot;),
    unicodedata.lookup(&quot;COPYRIGHT SIGN&quot;),
    unicodedata.lookup(&quot;PEACH&quot;),
)  # a Â© ğŸ‘
</code></pre>
<p>å¦‚æœç»™å®šçš„åå­—ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ Unicode å­—ç¬¦åï¼Œé‚£ä¹ˆä¼šæŠ›å‡º KeyErrorã€‚</p>
<p><strong><font color="blue">unicodedata.name</font></strong></p>
<p>å’Œ lookup åŠŸèƒ½ç›¸åï¼Œè´Ÿè´£è¿”å›å­—ç¬¦çš„åç§°ã€‚</p>
<pre><code class="language-python">import unicodedata

print(unicodedata.name(&quot;z&quot;))  # LATIN SMALL LETTER Z
print(unicodedata.name(&quot;@&quot;))  # COMMERCIAL AT
print(unicodedata.name(&quot;ğŸ‘&quot;))  # PEACH
</code></pre>
<p>æ¯”è¾ƒç®€å•ï¼Œå¦‚æœå­—ç¬¦æ²¡æœ‰åç§°ï¼Œåˆ™æŠ›å‡º ValueErrorï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<p><strong><font color="blue">unicodedata.numeric</font></strong></p>
<p>å°† unicode å­—ç¬¦è½¬æˆç­‰æ•ˆçš„æ•°å€¼ï¼Œå¦‚æœæ— æ³•è½¬æ¢åˆ™è¿”å›é»˜è®¤å€¼ï¼ˆæ²¡æœ‰åˆ™æŠ›å‡º ValueErrorï¼‰ã€‚</p>
<pre><code class="language-python">import unicodedata

print(unicodedata.numeric(&quot;é›¶&quot;))  # 0.0
print(unicodedata.numeric(&quot;ã€‡&quot;))  # 0.0
print(unicodedata.numeric(&quot;ä¸€&quot;))  # 1.0
print(unicodedata.numeric(&quot;è´°&quot;))  # 2.0
print(unicodedata.numeric(&quot;å&quot;))  # 3.0
print(unicodedata.numeric(&quot;å››&quot;))  # 4.0
print(unicodedata.numeric(&quot;ä¼&quot;))  # 5.0
print(unicodedata.numeric(&quot;â‘¥&quot;))  # 6.0
print(unicodedata.numeric(&quot;æ¼†&quot;))  # 7.0
print(unicodedata.numeric(&quot;æŒ&quot;))  # 8.0
print(unicodedata.numeric(&quot;ç–&quot;))  # 9.0
print(unicodedata.numeric(&quot;æ‹¾&quot;))  # 10.0


text = &quot;åŠ  vÌ å£¹æŒâ‘¤å£¹é›¶è´°â¤ï¸æŒâ‘¥æŒã€‡â‘¡ï¼Œçœ‹ Pythonâ¤ï¸&quot;

def chr_to_num(char):
    try:
        return str(unicodedata.numeric(char))[0]
    except ValueError:
        return char

print(
    &quot;&quot;.join(map(chr_to_num, text))
)  # åŠ  vÌ 185102â¤ï¸86802ï¼Œçœ‹ Pythonâ¤ï¸
</code></pre>
<p>ä»¥ä¸Šå°±æ˜¯ unicodedata æ¨¡å—çš„ä¸€äº›ç”¨æ³•ï¼Œå½“ç„¶è¿˜æœ‰å‡ ä¸ªå‡½æ•°æ²¡æœ‰è¯´ï¼Œä¸ªäººè§‰å¾—ç”¨ä¸ä¸Šã€‚è¿™é‡Œé¢æœ€æœ‰ç”¨çš„åº”è¯¥å°±æ˜¯ normalize å‡½æ•°äº†ï¼Œæ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒå®˜ç½‘ã€‚</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../ä½¿ç”¨ collections æ¨¡å—æ‰©å±•ä½ çš„æ•°æ®ç±»/doc.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../ä½¿ç”¨ struct æ¨¡å—æ‰“åŒ…ã€è§£åŒ…äºŒè¿›åˆ¶æ•°æ®/doc.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../ä½¿ç”¨ collections æ¨¡å—æ‰©å±•ä½ çš„æ•°æ®ç±»/doc.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../ä½¿ç”¨ struct æ¨¡å—æ‰“åŒ…ã€è§£åŒ…äºŒè¿›åˆ¶æ•°æ®/doc.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../theme/custom.js"></script>
    </body>
</html>
